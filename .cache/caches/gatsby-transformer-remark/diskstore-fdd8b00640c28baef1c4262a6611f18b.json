{"expireTime":9007200873242963000,"key":"transformer-remark-markdown-html-ast-6a53674e9c457491098e9580fb60d14e--","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Kubernetes configuration and authentication","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":46,"offset":46}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":46,"offset":46}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kubernetes is a platform for the orchestration and the management of containers. A Kubernetes cluster is at your disposal and you have access to the namespace named after your group name.","position":{"start":{"line":4,"column":1,"offset":48},"end":{"line":4,"column":188,"offset":235}}}],"position":{"start":{"line":4,"column":1,"offset":48},"end":{"line":4,"column":188,"offset":235}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To start working with Kubernetes, you must have the Kubernetes configuration setup and you must be authentified using our OAuth provider.","position":{"start":{"line":6,"column":1,"offset":237},"end":{"line":6,"column":138,"offset":374}}}],"position":{"start":{"line":6,"column":1,"offset":237},"end":{"line":6,"column":138,"offset":374}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Kube Config","position":{"start":{"line":8,"column":5,"offset":380},"end":{"line":8,"column":16,"offset":391}}}],"position":{"start":{"line":8,"column":1,"offset":376},"end":{"line":8,"column":16,"offset":391}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A configuration file known as 'kube config' (commonly located in ","position":{"start":{"line":10,"column":1,"offset":393},"end":{"line":10,"column":66,"offset":458}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.kube/config"}],"position":{"start":{"line":10,"column":66,"offset":458},"end":{"line":10,"column":82,"offset":474}}},{"type":"text","value":") is needed in order to use ","position":{"start":{"line":10,"column":82,"offset":474},"end":{"line":10,"column":110,"offset":502}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl"}],"position":{"start":{"line":10,"column":110,"offset":502},"end":{"line":10,"column":119,"offset":511}}},{"type":"text","value":" and interact with the Kubernetes cluster.","position":{"start":{"line":10,"column":119,"offset":511},"end":{"line":10,"column":161,"offset":553}}}],"position":{"start":{"line":10,"column":1,"offset":393},"end":{"line":10,"column":161,"offset":553}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When interacting with Kubernetes from the ","position":{"start":{"line":12,"column":1,"offset":555},"end":{"line":12,"column":43,"offset":597}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"edge node","position":{"start":{"line":12,"column":45,"offset":599},"end":{"line":12,"column":54,"offset":608}}}],"position":{"start":{"line":12,"column":43,"offset":597},"end":{"line":12,"column":56,"offset":610}}},{"type":"text","value":", the environment is already configured. You can jump to the next section with instructions on how to login and start using ","position":{"start":{"line":12,"column":56,"offset":610},"end":{"line":12,"column":180,"offset":734}}},{"type":"element","tagName":"a","properties":{"href":"/en/docs/kubernetes/kubectl/"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl"}],"position":{"start":{"line":12,"column":181,"offset":735},"end":{"line":12,"column":190,"offset":744}}}],"position":{"start":{"line":12,"column":180,"offset":734},"end":{"line":12,"column":221,"offset":775}}},{"type":"text","value":".","position":{"start":{"line":12,"column":221,"offset":775},"end":{"line":12,"column":222,"offset":776}}}],"position":{"start":{"line":12,"column":1,"offset":555},"end":{"line":12,"column":222,"offset":776}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It is also possible to configure other environments such as the one on your host machine with the instruction below.","position":{"start":{"line":14,"column":1,"offset":778},"end":{"line":14,"column":117,"offset":894}}}],"position":{"start":{"line":14,"column":1,"offset":778},"end":{"line":14,"column":117,"offset":894}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Start by ","position":{"start":{"line":17,"column":1,"offset":897},"end":{"line":17,"column":10,"offset":906}}},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/tasks/tools/"},"children":[{"type":"text","value":"installing ","position":{"start":{"line":17,"column":11,"offset":907},"end":{"line":17,"column":22,"offset":918}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl"}],"position":{"start":{"line":17,"column":22,"offset":918},"end":{"line":17,"column":31,"offset":927}}}],"position":{"start":{"line":17,"column":10,"offset":906},"end":{"line":17,"column":73,"offset":969}}},{"type":"text","value":" following the documentations of your targeted environment. By default, the tool expect the presence of a ","position":{"start":{"line":17,"column":73,"offset":969},"end":{"line":17,"column":179,"offset":1075}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.kube/config"}],"position":{"start":{"line":17,"column":179,"offset":1075},"end":{"line":17,"column":195,"offset":1091}}},{"type":"text","value":" file. This file contains the basic information to interact with the Kuberntes cluster. You can gain a copy of its content from the ","position":{"start":{"line":17,"column":195,"offset":1091},"end":{"line":17,"column":327,"offset":1223}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"edge node","position":{"start":{"line":17,"column":329,"offset":1225},"end":{"line":17,"column":338,"offset":1234}}}],"position":{"start":{"line":17,"column":327,"offset":1223},"end":{"line":17,"column":340,"offset":1236}}},{"type":"text","value":":","position":{"start":{"line":17,"column":340,"offset":1236},"end":{"line":17,"column":341,"offset":1237}}}],"position":{"start":{"line":17,"column":1,"offset":897},"end":{"line":17,"column":341,"offset":1237}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"cat /etc/kubernetes/base_config\n"}],"position":{"start":{"line":19,"column":1,"offset":1239},"end":{"line":21,"column":4,"offset":1282}}}],"position":{"start":{"line":19,"column":1,"offset":1239},"end":{"line":21,"column":4,"offset":1282}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now import or copy paste its content. For example, from your Linux environment:","position":{"start":{"line":23,"column":1,"offset":1284},"end":{"line":23,"column":80,"offset":1363}}}],"position":{"start":{"line":23,"column":1,"offset":1284},"end":{"line":23,"column":80,"offset":1363}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"mkdir ~/.kube\n# Replace {username}, enter your password when prompted.\nscp {username}@edge-1.au.adaltas.cloud:/etc/kubernetes/base_confi ~/.kube/config\n"}],"position":{"start":{"line":25,"column":1,"offset":1365},"end":{"line":29,"column":4,"offset":1528}}}],"position":{"start":{"line":25,"column":1,"offset":1365},"end":{"line":29,"column":4,"offset":1528}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"Login","position":{"start":{"line":31,"column":6,"offset":1535},"end":{"line":31,"column":11,"offset":1540}}}],"position":{"start":{"line":31,"column":1,"offset":1530},"end":{"line":31,"column":11,"offset":1540}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To login, go to ","position":{"start":{"line":33,"column":1,"offset":1542},"end":{"line":33,"column":17,"offset":1558}}},{"type":"element","tagName":"a","properties":{"href":"https://k8s-wrk-1.au.adaltas.cloud:32000/auth?client_id=au-k8s&redirect_uri=http%3A%2F%2Fk8s-adm-1.au.adaltas.cloud%3A5555%2Fcallback&response_type=code&scope=groups+audience%3Aserver%3Aclient_id%3Aau-k8s+openid+profile+email+offline_access&state=I+wish+to+wash+my+irish+wristwatch"},"children":[{"type":"text","value":"this page","position":{"start":{"line":33,"column":18,"offset":1559},"end":{"line":33,"column":27,"offset":1568}}}],"position":{"start":{"line":33,"column":17,"offset":1558},"end":{"line":33,"column":311,"offset":1852}}},{"type":"text","value":".","position":{"start":{"line":33,"column":311,"offset":1852},"end":{"line":33,"column":312,"offset":1853}}}],"position":{"start":{"line":33,"column":1,"offset":1542},"end":{"line":33,"column":312,"offset":1853}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./assets/login.png","alt":"Login page"},"children":[],"position":{"start":{"line":35,"column":1,"offset":1855},"end":{"line":35,"column":34,"offset":1888}}}],"position":{"start":{"line":35,"column":1,"offset":1855},"end":{"line":35,"column":34,"offset":1888}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The credentials are the one you received via email when you were registered to the cluster.","position":{"start":{"line":37,"column":1,"offset":1890},"end":{"line":37,"column":92,"offset":1981}}}],"position":{"start":{"line":37,"column":1,"offset":1890},"end":{"line":37,"column":92,"offset":1981}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once you logged in, click ","position":{"start":{"line":39,"column":1,"offset":1983},"end":{"line":39,"column":27,"offset":2009}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"\"Grant Access\"","position":{"start":{"line":39,"column":29,"offset":2011},"end":{"line":39,"column":43,"offset":2025}}}],"position":{"start":{"line":39,"column":27,"offset":2009},"end":{"line":39,"column":45,"offset":2027}}},{"type":"text","value":" then copy the ","position":{"start":{"line":39,"column":45,"offset":2027},"end":{"line":39,"column":60,"offset":2042}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"\"Access Token\"","position":{"start":{"line":39,"column":62,"offset":2044},"end":{"line":39,"column":76,"offset":2058}}}],"position":{"start":{"line":39,"column":60,"offset":2042},"end":{"line":39,"column":78,"offset":2060}}},{"type":"text","value":" and ","position":{"start":{"line":39,"column":78,"offset":2060},"end":{"line":39,"column":83,"offset":2065}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"\"Refresh Token\"","position":{"start":{"line":39,"column":85,"offset":2067},"end":{"line":39,"column":100,"offset":2082}}}],"position":{"start":{"line":39,"column":83,"offset":2065},"end":{"line":39,"column":102,"offset":2084}}},{"type":"text","value":" in environment variables of your ssh session:","position":{"start":{"line":39,"column":102,"offset":2084},"end":{"line":39,"column":148,"offset":2130}}}],"position":{"start":{"line":39,"column":1,"offset":1983},"end":{"line":39,"column":148,"offset":2130}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ACCESS_TOKEN=XXXXXX\nREFRESH_TOKEN=XXXXXX\n"}],"position":{"start":{"line":41,"column":1,"offset":2132},"end":{"line":44,"column":4,"offset":2180}}}],"position":{"start":{"line":41,"column":1,"offset":2132},"end":{"line":44,"column":4,"offset":2180}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then run the following command to save these credentials in your local ","position":{"start":{"line":46,"column":1,"offset":2182},"end":{"line":46,"column":72,"offset":2253}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.kube/config"}],"position":{"start":{"line":46,"column":72,"offset":2253},"end":{"line":46,"column":88,"offset":2269}}},{"type":"text","value":" file:","position":{"start":{"line":46,"column":88,"offset":2269},"end":{"line":46,"column":94,"offset":2275}}}],"position":{"start":{"line":46,"column":1,"offset":2182},"end":{"line":46,"column":94,"offset":2275}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl config set-credentials kubernetes-user \\\n   --auth-provider=oidc \\\n   --auth-provider-arg=idp-issuer-url=https://k8s-wrk-1.au.adaltas.cloud:32000 \\\n   --auth-provider-arg=client-id=au-k8s \\\n   --auth-provider-arg=client-secret=ZXhhbXBsZS1hcHAtc2VjcmV0 \\\n   --auth-provider-arg=idp-certificate-authority=/etc/ipa/ca.crt \\\n   --auth-provider-arg=refresh-token=$REFRESH_TOKEN \\\n   --auth-provider-arg=id-token=$ACCESS_TOKEN\n"}],"position":{"start":{"line":48,"column":1,"offset":2277},"end":{"line":57,"column":4,"offset":2713}}}],"position":{"start":{"line":48,"column":1,"offset":2277},"end":{"line":57,"column":4,"offset":2713}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your ","position":{"start":{"line":59,"column":1,"offset":2715},"end":{"line":59,"column":6,"offset":2720}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.kube/config"}],"position":{"start":{"line":59,"column":6,"offset":2720},"end":{"line":59,"column":22,"offset":2736}}},{"type":"text","value":" file has been appended with you credentials and you should then be able to run ","position":{"start":{"line":59,"column":22,"offset":2736},"end":{"line":59,"column":102,"offset":2816}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl"}],"position":{"start":{"line":59,"column":102,"offset":2816},"end":{"line":59,"column":111,"offset":2825}}},{"type":"text","value":" commands. The token is available for a couple hours.","position":{"start":{"line":59,"column":111,"offset":2825},"end":{"line":59,"column":164,"offset":2878}}}],"position":{"start":{"line":59,"column":1,"offset":2715},"end":{"line":59,"column":164,"offset":2878}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note","position":{"start":{"line":61,"column":3,"offset":2882},"end":{"line":61,"column":7,"offset":2886}}}],"position":{"start":{"line":61,"column":1,"offset":2880},"end":{"line":61,"column":9,"offset":2888}}},{"type":"text","value":": next time you log-in, only the last two fields are required as the others will already be known:","position":{"start":{"line":61,"column":9,"offset":2888},"end":{"line":61,"column":107,"offset":2986}}}],"position":{"start":{"line":61,"column":1,"offset":2880},"end":{"line":61,"column":107,"offset":2986}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kubectl config set-credentials kubernetes-user \\\n   --auth-provider-arg=refresh-token=$REFRESH_TOKEN \\\n   --auth-provider-arg=id-token=$ACCESS_TOKEN\n"}],"position":{"start":{"line":63,"column":1,"offset":2988},"end":{"line":67,"column":4,"offset":3144}}}],"position":{"start":{"line":63,"column":1,"offset":2988},"end":{"line":67,"column":4,"offset":3144}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":68,"column":1,"offset":3145}}}}